<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>ğŸ®å°èƒ¡ã®ç¤¼ç‰©æ—¶é—´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-image: url('bg.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }

        .card {
            transition: transform 0.5s, background-color 0.3s;
        }

        .card:hover {
            transform: rotateY(180deg);
            background-color: #d8b4fe;
        }

        .card.clicked {
            pointer-events: none;
            /* ç¦æ­¢å†å“åº”ç‚¹å‡» */
        }

        .card.clicked:hover {
            background-color: inherit;
            /* ç¦æ­¢hoverèƒŒæ™¯å˜è‰² */
        }

        #flipResult {
            display: none;
        }
    </style>
</head>

<body class="text-center min-h-screen flex flex-col justify-center items-center p-4 bg-pink-50 bg-opacity-60">
    <h1 class="text-6xl text-pink-400 mb-10">ğŸ‚èƒ¡æ·»ç­–ï¼Œ26å²ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚</h1>
    <button class="rounded-sm bg-white mb-5" onclick="document.getElementById('bgm').play()">ç‚¹æˆ‘!ç‚¹æˆ‘ï¼</button>
    <audio id="bgm" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>



    <div id="game" class="space-y-6 max-w-2xl w-full">
        <!-- é—®ç­” -->
        <div id="stage1" class="bg-white/80 p-10 rounded-2xl shadow-xl space-y-6">
            <h2 class="text-3xl font-bold text-pink-600">ğŸå°èƒ¡ã®é—¯å…³æ—¶é—´</h2>
            <p id="questionText" class="text-lg font-medium"></p>
            <div id="options" class="space-y-4"></div>
            <p id="rewardText" class="text-green-600 font-semibold"></p>
        </div>

        <!-- æŠ½å¥– -->
        <div id="stage2" class="bg-white/80 p-10 rounded-2xl shadow-xl space-y-6 hidden">
            <h2 class="text-3xl font-bold text-purple-600">ğŸå°èƒ¡ã®æŠ½å¡æ—¶é—´</h2>
            <p class="text-lg">ä½ å…±è·å¾— <span id="rewardCount"></span> å¼ å¡ï¼</p>
            <div id="cards" class="grid grid-cols-3 gap-4 justify-center"></div>
            <p id="flipResult" class="mt-4 font-semibold text-purple-600"></p>
            <button class="mt-6 bg-purple-600 text-white px-6 py-3 rounded-full text-lg hover:bg-purple-700"
                onclick="showImageModal()">
                æˆ‘æƒ³çœ‹å°çŒ«çš„æ‰‹å†™ä¿¡
            </button>
        </div>

        <!-- æ‰‹å†™ä¿¡ -->
        <div id="imageModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center hidden">
            <div class="bg-white p-6 rounded-lg shadow-xl">
                <button onclick="closeImageModal()"
                    class="text-red-500 text-2xl font-bold absolute top-2 right-2">Ã—</button>
                <img src="letter.png" alt="å°çŒ«çš„æ‰‹å†™ä¿¡" class="w-full max-w-md" />
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { q: "æˆ‘æ›´å–œæ¬¢å°çŒ«è¿˜æ˜¯å°ç‹—ï¼Ÿ", options: ["å°çŒ«", "å°ç‹—"], correct: "å°çŒ«" },
            { q: "æˆ‘æ›´å–œæ¬¢åƒï¼Ÿ", options: ["è¾£", "ç”œ"], correct: "è¾£" },
            { q: "å’±ä¿©ç¬¬ä¸€æ¬¡è§é¢æ—¥æœŸï¼Ÿ", options: ["2024/03/07", "2024/03/08"], correct: "2024/03/07" },
            { q: "ç¬¬ä¸€æ¬¡è§é¢æˆ‘ç©¿äº†ä»€ä¹ˆé¢œè‰²å¤§è¡£ï¼Ÿ", options: ["ç™½è‰²", "é»‘è‰²"], correct: "é»‘è‰²" },
            { q: "æˆ‘æ—©ä¸Šèµ·å¾—æ¥å—ï¼Ÿ", options: ["å½“ç„¶èµ·å¾—æ¥", "ä½ åœ¨è¯´æ¢¦è¯"], correct: "ä½ åœ¨è¯´æ¢¦è¯" },
            { q: "ä½ æƒ³ä¸€ç›´è·Ÿå°çŒ«åœ¨ä¸€èµ·å—", options: ["æƒ³", "ä¸€ç›´ä¸€ç›´ä¸€ç›´åœ¨ä¸€èµ·ï¼"], correct: "ä¸€ç›´ä¸€ç›´ä¸€ç›´åœ¨ä¸€èµ·ï¼" }
        ];
        let currentQ = 0, cardsEarned = 0;

        function renderQuestion() {
            const q = questions[currentQ];
            document.getElementById("questionText").textContent = q.q;
            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = "";
            q.options.forEach(opt => {
                const btn = document.createElement("button");
                btn.textContent = opt;
                btn.className = "bg-pink-400 hover:bg-blue-500 text-white px-6 py-3 text-lg rounded m-4";
                btn.onclick = () => handleAnswer(opt);
                optionsDiv.appendChild(btn);
            });
        }

        function handleAnswer(choice) {
            if (choice === questions[currentQ].correct) {
                cardsEarned++;
                document.getElementById("rewardText").textContent = `ğŸ‰ ç­”å¯¹å•¦ï¼è·å¾— 1 å¼ ç¤¼ç‰©å¡ï¼ï¼ˆç›®å‰å…± ${cardsEarned} å¼ ï¼‰`;
            } else {
                document.getElementById("rewardText").textContent = `ğŸ‘Š ä½ æœ‰ä¸€ç‚¹ç‚¹ç¬¨ï¼Œè¿™é¢˜æ²¡æœ‰å¥–åŠ±ï½`;
            }
            currentQ++;
            if (currentQ < questions.length) {
                setTimeout(() => {
                    document.getElementById("rewardText").textContent = "";
                    renderQuestion();
                }, 1500);
            } else {
                setTimeout(() => {
                    document.getElementById("stage1").classList.add("hidden");
                    document.getElementById("stage2").classList.remove("hidden");
                    startCardGame();
                }, 2000);
            }
        }

        // ç¿»å¡
        function startCardGame() {
            document.getElementById("rewardCount").textContent = cardsEarned;
            const cardsDiv = document.getElementById("cards");
            cardsDiv.innerHTML = "";

            const availableGifts = [
                "ğŸ æ¥è‡ªä¸œæ–¹çš„ç¥ç§˜åŒ…è£¹",
                "ğŸ–ï¸ å°çŒ«çš„çˆ±å¿ƒæ‰‹ä½œ",
                "ğŸ’† é©¬æ€é¸¡åˆ¸ x1",
                "ğŸ’Œ å°çŒ«çš„æ‰‹å†™ä¿¡",
                "â¤  å…æ­»é‡‘ç‰Œ x1",
                "ğŸ€ å¥½è¿ç¬¦å’’"
            ];

            // ç¡®ä¿æ¯ä¸ªå¡ç‰‡çš„ç»“æœä¸é‡å¤
            for (let i = 0; i < cardsEarned; i++) {
                const btn = document.createElement("button");
                btn.className = "card bg-purple-200 text-xl p-10 rounded-xl hover:bg-purple-300";  // åŸæœ‰çš„hoveræ•ˆæœ
                btn.innerHTML = "<img src='back.jpg' alt='ğŸ´' class='w-full h-full object-cover' />";

                // æ ‡è®°å¡ç‰‡æ˜¯å¦å·²ç»ç‚¹å‡»è¿‡
                let clicked = false;

                btn.onclick = () => {
                    if (!clicked && availableGifts.length > 0) {  // åªæœ‰åœ¨æœªç‚¹å‡»çš„æƒ…å†µä¸‹ä¸”æœ‰æœªç”¨çš„ç¤¼ç‰©æ—¶
                        const randomIndex = Math.floor(Math.random() * availableGifts.length);  // éšæœºç”Ÿæˆç´¢å¼•
                        const gift = availableGifts[randomIndex];  // è·å–éšæœºçš„ç¤¼ç‰©

                        btn.innerHTML = `<span class='card-face'>${gift}</span>`;  // æ˜¾ç¤ºç¤¼ç‰©
                        btn.disabled = true;  // ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
                        clicked = true;  // è®¾ç½®ä¸ºå·²ç‚¹å‡»çŠ¶æ€
                        document.getElementById("flipResult").textContent = gift;  // æ˜¾ç¤ºç»“æœ

                        // ä»æ•°ç»„ä¸­ç§»é™¤å·²é€‰çš„ç¤¼ç‰©ï¼Œé¿å…é‡å¤
                        availableGifts.splice(randomIndex, 1);

                        // ç¦ç”¨hoveræ•ˆæœï¼Œç¡®ä¿å¡ç‰‡ç¿»è¿‡åä¸ä¼šå†ç¿»è½¬
                        btn.classList.add("clicked");  // æ·»åŠ  clicked ç±»
                    }
                };

                cardsDiv.appendChild(btn);
            }
        }

        renderQuestion();

        // æ˜¾ç¤ºå¼¹çª—
        function showImageModal() {
            document.getElementById("imageModal").classList.remove("hidden");
        }

        // å…³é—­å¼¹çª—
        function closeImageModal() {
            document.getElementById("imageModal").classList.add("hidden");
        }
    </script>

</body>

</html>